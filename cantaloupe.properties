# Cantaloupe IIIF Image Server Configuration
# Cantaloupe IIIF 图像服务器配置

# Enable the FilesystemSource to read images from a local folder
# 启用 FilesystemSource 以从本地文件夹读取图像
source.static = FilesystemSource

# Path to the image directory (mapped via Docker volume)
# 图像目录路径（通过 Docker 卷映射）
# Note: In production this is mapped to NAS path
# 注意：在生产环境中，这映射到 NAS 路径
FilesystemSource.BasicLookupStrategy.path_prefix = /var/lib/cantaloupe/images/
FilesystemSource.BasicLookupStrategy.extension = 

# Enable processors for different formats
# 启用不同格式的处理器
# Use Java2d for better memory control on N100 vs TurboJpeg
# 在 N100 上使用 Java2d 以获得更好的内存控制（相对于 TurboJpeg）
processor.fallback = Java2dProcessor
processor.tif = Java2dProcessor
processor.jpg = Java2dProcessor
processor.png = Java2dProcessor

# Memory Cache settings for low RAM environment
# 低内存环境的内存缓存设置
cache.server.source = FilesystemCache
cache.server.source.filesystem.pathname = /var/lib/cantaloupe/cache
cache.server.derivative = FilesystemCache
cache.server.derivative.filesystem.pathname = /var/lib/cantaloupe/cache
# Disable memory cache to save RAM for processing
# 禁用内存缓存以节省 RAM 用于处理
cache.server.memory.enabled = false

# Stream optimization
# 流式优化
# Ensure we don't load full images into heap
# 确保不将完整图像加载到堆中
processor.stream_retrieval_strategy = STREAM

# Enable IIIF API
# 启用 IIIF API
endpoint.iiif.2.enabled = true
endpoint.iiif.2.min_size = 64

# CORS (Cross-Origin Resource Sharing)
# 允许跨域请求，这对于 Mirador 等前端查看器是必需的
endpoint.public.auth.basic.enabled = false
endpoint.public.auth.secret = mySuperSecretPassword
endpoint.public.cors.enabled = true
endpoint.public.cors.allow_origin = *
endpoint.public.cors.allow_methods = GET, POST, OPTIONS, PUT, DELETE
endpoint.public.cors.allow_headers = Authorization, Content-Type, X-Requested-With, Accept, Origin, User-Agent, DNT, Cache-Control, X-Mx-ReqToken, Keep-Alive, X-Requested-With, If-Modified-Since
endpoint.public.cors.allow_credentials = true
endpoint.public.cors.max_age = 1800

# Logging
# 日志记录
log.application.level = INFO
log.error.level = WARN
